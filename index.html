<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=no"
    />

    <meta property="og:title" content="ProDocsSystem Bot" />
    <meta property="og:description" content="–ì–æ—Ç–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç –∑–∞ 90 —Å–µ–∫—É–Ω–¥" />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="/opengraph.jpg" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="ProDocsSystem Bot" />
    <meta name="twitter:description" content="–ì–æ—Ç–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç –∑–∞ 90 —Å–µ–∫—É–Ω–¥" />
    <meta name="twitter:image" content="/opengraph.jpg" />

    <link rel="icon" type="image/png" href="/favicon.png" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
      @import url("https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap");

      :root {
        --background: 220 20% 97%;
        --foreground: 222 47% 11%;
        --card: 0 0% 100%;
        --card-foreground: 222 47% 11%;
        --popover: 0 0% 100%;
        --popover-foreground: 222 47% 11%;
        --primary: 210 79% 54%;
        --primary-foreground: 210 40% 98%;
        --secondary: 210 40% 96.1%;
        --secondary-foreground: 222 47% 11.2%;
        --muted: 210 40% 96.1%;
        --muted-foreground: 215.4 16.3% 46.9%;
        --accent: 210 40% 96.1%;
        --accent-foreground: 222 47% 11.2%;
        --destructive: 0 84.2% 60.2%;
        --destructive-foreground: 210 40% 98%;
        --border: 214.3 31.8% 91.4%;
        --input: 214.3 31.8% 91.4%;
        --ring: 221.2 83.2% 53.3%;
        --radius: 0.75rem;
        --success: 129 58% 45%;
      }

      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
        border-color: hsl(var(--border));
      }
      body {
        font-family: "Inter", sans-serif;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        background-color: hsl(var(--background));
        color: hsl(var(--foreground));
        line-height: 1.5;
      }
      #root {
        min-height: 100vh;
        max-width: 448px;
        margin: 0 auto;
        position: relative;
        overflow: hidden;
        box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
      }
      .app-container {
        min-height: 100vh;
        background-color: hsl(var(--background));
        color: hsl(var(--foreground));
        padding-bottom: 96px;
        position: relative;
      }
      main {
        height: 100%;
        overflow-y: auto;
        -webkit-overflow-scrolling: touch;
      }
      main::-webkit-scrollbar {
        display: none;
      }
      main {
        -ms-overflow-style: none;
        scrollbar-width: none;
      }
      .bottom-nav {
        position: fixed;
        bottom: 0;
        left: 50%;
        transform: translateX(-50%);
        width: 100%;
        max-width: 448px;
        background-color: hsl(var(--card));
        border-top: 1px solid hsl(var(--border) / 0.5);
        padding: 8px 24px;
        height: 80px;
        z-index: 40;
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
      }
      .nav-item {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 4px;
        cursor: pointer;
        transition: color 0.2s;
        width: 56px;
        text-decoration: none;
        color: hsl(var(--muted-foreground));
      }
      .nav-item.active {
        color: hsl(var(--primary));
      }
      .nav-item svg {
        width: 24px;
        height: 24px;
        stroke-width: 2;
      }
      .nav-item.active svg {
        stroke-width: 2.5;
      }
      .nav-item span {
        font-size: 10px;
        font-weight: 500;
      }
      .fab {
        position: fixed;
        bottom: 24px;
        left: 50%;
        transform: translateX(-50%);
        z-index: 50;
        width: 56px;
        height: 56px;
        border-radius: 50%;
        background-color: hsl(var(--primary));
        border: 4px solid hsl(var(--background));
        box-shadow: 0 4px 12px hsl(var(--primary) / 0.3);
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: transform 0.2s, background-color 0.2s;
        text-decoration: none;
      }
      .fab:hover {
        background-color: hsl(var(--primary) / 0.9);
      }
      .fab:active {
        transform: translateX(-50%) scale(0.95);
      }
      .fab svg {
        width: 32px;
        height: 32px;
        color: white;
        stroke-width: 2.5;
      }
      .btn {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
        white-space: nowrap;
        border-radius: calc(var(--radius) - 2px);
        font-size: 14px;
        font-weight: 500;
        transition: all 0.2s;
        cursor: pointer;
        border: 1px solid transparent;
        outline: none;
        font-family: inherit;
      }
      .btn:focus-visible {
        outline: 2px solid hsl(var(--ring));
        outline-offset: 2px;
      }
      .btn:disabled {
        pointer-events: none;
        opacity: 0.5;
      }
      .btn-default {
        background-color: hsl(var(--primary));
        color: hsl(var(--primary-foreground));
        border-color: hsl(var(--primary));
        min-height: 36px;
        padding: 8px 16px;
      }
      .btn-default:hover {
        background-color: hsl(var(--primary) / 0.9);
      }
      .btn-outline {
        border-color: hsl(var(--border));
        background-color: transparent;
        box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
        min-height: 36px;
        padding: 8px 16px;
      }
      .btn-outline:active {
        box-shadow: none;
      }
      .btn-secondary {
        background-color: hsl(var(--secondary));
        color: hsl(var(--secondary-foreground));
        border-color: hsl(var(--border));
        min-height: 36px;
        padding: 8px 16px;
      }
      .btn-ghost {
        border-color: transparent;
        background-color: transparent;
        min-height: 36px;
        padding: 8px 16px;
      }
      .btn-sm {
        min-height: 32px;
        padding: 6px 12px;
        font-size: 12px;
        border-radius: calc(var(--radius) - 2px);
      }
      .btn-lg {
        min-height: 40px;
        padding: 8px 32px;
        border-radius: calc(var(--radius) - 2px);
      }
      .btn-icon {
        width: 36px;
        height: 36px;
        padding: 0;
      }
      .btn-full {
        width: 100%;
      }
      .input {
        display: flex;
        height: 36px;
        width: 100%;
        border-radius: calc(var(--radius) - 2px);
        border: 1px solid hsl(var(--input));
        background-color: transparent;
        padding: 8px 12px;
        font-size: 14px;
        transition: all 0.2s;
        box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
      }
      .input:focus {
        outline: none;
        border-color: hsl(var(--ring));
        box-shadow: 0 0 0 1px hsl(var(--ring));
      }
      .input::placeholder {
        color: hsl(var(--muted-foreground));
      }
      .input:disabled {
        cursor: not-allowed;
        opacity: 0.5;
      }
      .card {
        background-color: hsl(var(--card));
        color: hsl(var(--card-foreground));
        border-radius: var(--radius);
        border: 1px solid hsl(var(--border) / 0.5);
        box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
      }
      .card-content {
        padding: 16px;
      }
      .badge {
        display: inline-flex;
        align-items: center;
        border-radius: calc(var(--radius) - 4px);
        padding: 2px 8px;
        font-size: 12px;
        font-weight: 500;
        border: 1px solid transparent;
      }
      .badge-secondary {
        background-color: hsl(var(--secondary));
        color: hsl(var(--secondary-foreground));
      }
      .badge-outline {
        border-color: hsl(var(--border));
        background-color: transparent;
      }
      .progress {
        width: 100%;
        height: 6px;
        background-color: hsl(var(--secondary));
        border-radius: 9999px;
        overflow: hidden;
      }
      .progress-bar {
        height: 100%;
        background-color: hsl(var(--primary));
        transition: width 0.3s;
      }
      .container {
        padding: 16px;
      }
      .space-y-2 > * + * {
        margin-top: 8px;
      }
      .space-y-3 > * + * {
        margin-top: 12px;
      }
      .space-y-4 > * + * {
        margin-top: 16px;
      }
      .space-y-6 > * + * {
        margin-top: 24px;
      }
      .flex {
        display: flex;
      }
      .flex-col {
        flex-direction: column;
      }
      .items-center {
        align-items: center;
      }
      .justify-between {
        justify-content: space-between;
      }
      .justify-center {
        justify-content: center;
      }
      .gap-2 {
        gap: 8px;
      }
      .gap-3 {
        gap: 12px;
      }
      .gap-4 {
        gap: 16px;
      }
      .text-sm {
        font-size: 14px;
      }
      .text-xs {
        font-size: 12px;
      }
      .text-lg {
        font-size: 18px;
      }
      .text-xl {
        font-size: 20px;
      }
      .text-2xl {
        font-size: 24px;
      }
      .font-medium {
        font-weight: 500;
      }
      .font-bold {
        font-weight: 700;
      }
      .text-primary {
        color: hsl(var(--primary));
      }
      .text-muted {
        color: hsl(var(--muted-foreground));
      }
      .text-center {
        text-align: center;
      }
      .mb-2 {
        margin-bottom: 8px;
      }
      .mb-3 {
        margin-bottom: 12px;
      }
      .mb-4 {
        margin-bottom: 16px;
      }
      .mt-1 {
        margin-top: 4px;
      }
      .mt-2 {
        margin-top: 8px;
      }
      .relative {
        position: relative;
      }
      .absolute {
        position: absolute;
      }
      .fixed {
        position: fixed;
      }
      .inset-0 {
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
      }
      .z-10 {
        z-index: 10;
      }
      .z-40 {
        z-index: 40;
      }
      .z-50 {
        z-index: 50;
      }
      .rounded {
        border-radius: var(--radius);
      }
      .rounded-lg {
        border-radius: calc(var(--radius) + 4px);
      }
      .rounded-xl {
        border-radius: calc(var(--radius) + 8px);
      }
      .rounded-full {
        border-radius: 9999px;
      }
      .overflow-hidden {
        overflow: hidden;
      }
      .overflow-x-auto {
        overflow-x: auto;
      }
      .overflow-y-auto {
        overflow-y: auto;
      }
      .hidden {
        display: none;
      }
      .grid {
        display: grid;
      }
      .grid-cols-2 {
        grid-template-columns: repeat(2, 1fr);
      }
      .grid-cols-3 {
        grid-template-columns: repeat(3, 1fr);
      }
      .w-full {
        width: 100%;
      }
      .h-full {
        height: 100%;
      }
      .min-h-screen {
        min-height: 100vh;
      }
      .bg-background {
        background-color: hsl(var(--background));
      }
      .bg-card {
        background-color: hsl(var(--card));
      }
      .bg-secondary {
        background-color: hsl(var(--secondary));
      }
      .bg-primary {
        background-color: hsl(var(--primary));
      }
      .bg-white {
        background-color: white;
      }
      .border {
        border: 1px solid hsl(var(--border));
      }
      .border-t {
        border-top: 1px solid hsl(var(--border));
      }
      .border-b {
        border-bottom: 1px solid hsl(var(--border));
      }
      .shadow-sm {
        box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
      }
      .shadow-md {
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      }
      .shadow-lg {
        box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1);
      }
      .cursor-pointer {
        cursor: pointer;
      }
      .transition-all {
        transition: all 0.2s;
      }
      .modal-overlay {
        position: fixed;
        inset: 0;
        background-color: rgba(0, 0, 0, 0.4);
        backdrop-filter: blur(4px);
        z-index: 50;
        display: flex;
        align-items: flex-end;
        justify-content: center;
        padding: 16px;
      }
      .modal-content {
        background-color: hsl(var(--card));
        width: 100%;
        max-width: 384px;
        border-radius: 16px;
        padding: 24px;
        box-shadow: 0 20px 25px rgba(0, 0, 0, 0.2);
      }
      .dropdown {
        position: relative;
      }
      .dropdown-menu {
        position: absolute;
        right: 0;
        top: 100%;
        margin-top: 4px;
        background-color: hsl(var(--popover));
        border: 1px solid hsl(var(--border));
        border-radius: calc(var(--radius) - 2px);
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        min-width: 160px;
        z-index: 50;
        padding: 4px;
      }
      .dropdown-item {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 8px 12px;
        border-radius: calc(var(--radius) - 4px);
        cursor: pointer;
        font-size: 14px;
        transition: background-color 0.2s;
      }
      .dropdown-item:hover {
        background-color: hsl(var(--accent));
      }
      .dropdown-item.destructive {
        color: hsl(var(--destructive));
      }
      .accordion-item {
        border-bottom: 1px solid hsl(var(--border));
      }
      .accordion-trigger {
        width: 100%;
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 16px 0;
        background: none;
        border: none;
        cursor: pointer;
        font-size: 14px;
        font-weight: 500;
        text-align: left;
      }
      .accordion-content {
        padding-bottom: 16px;
        color: hsl(var(--muted-foreground));
        font-size: 14px;
      }
      .accordion-icon {
        transition: transform 0.2s;
      }
      .accordion-item.open .accordion-icon {
        transform: rotate(180deg);
      }
      @keyframes fadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }
      @keyframes slideIn {
        from {
          transform: translateY(100%);
        }
        to {
          transform: translateY(0);
        }
      }
      .fade-in {
        animation: fadeIn 0.3s;
      }
      .slide-in {
        animation: slideIn 0.3s;
      }
      .page {
        display: none;
      }
      .page.active {
        display: block;
      }
      .sticky-header {
        position: sticky;
        top: 0;
        background-color: hsl(var(--background) / 0.8);
        backdrop-filter: blur(12px);
        z-index: 10;
        border-bottom: 1px solid hsl(var(--border) / 0.5);
      }
      .gradient-primary {
        background: linear-gradient(
          to right,
          hsl(var(--primary)),
          hsl(210 79% 54% / 0.8)
        );
      }
      .gradient-amber {
        background: linear-gradient(to right, #f59e0b, #ea580c);
      }
      .aspect-document {
        aspect-ratio: 1 / 1.4;
      }
      .whitespace-nowrap {
        white-space: nowrap;
      }
      .truncate {
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
      }
      .leading-tight {
        line-height: 1.25;
      }
      .leading-none {
        line-height: 1;
      }
      .opacity-50 {
        opacity: 0.5;
      }
      .blur-\[1px\] {
        filter: blur(1px);
      }
      .rotate-12 {
        transform: rotate(12deg);
      }
      .-translate-y-1\/2 {
        transform: translateY(-50%);
      }
      .translate-x-\(-50\%\) {
        transform: translateX(-50%);
      }
      .bg-primary\/10 {
        background-color: hsl(var(--primary) / 0.1);
      }
      .bg-primary\/20 {
        background-color: hsl(var(--primary) / 0.2);
      }
      .bg-primary\/5 {
        background-color: hsl(var(--primary) / 0.05);
      }
      .bg-secondary\/20 {
        background-color: hsl(var(--secondary) / 0.2);
      }
      .bg-secondary\/50 {
        background-color: hsl(var(--secondary) / 0.5);
      }
      .border-border\/50 {
        border-color: hsl(var(--border) / 0.5);
      }
      .border-primary\/20 {
        border-color: hsl(var(--primary) / 0.2);
      }
      .border-primary\/30 {
        border-color: hsl(var(--primary) / 0.3);
      }
      .text-white\/90 {
        color: rgba(255, 255, 255, 0.9);
      }
      .text-white\/10 {
        color: rgba(255, 255, 255, 0.1);
      }
      .shadow-primary\/20 {
        box-shadow: 0 4px 6px hsl(var(--primary) / 0.2);
      }
      .shadow-primary\/30 {
        box-shadow: 0 4px 12px hsl(var(--primary) / 0.3);
      }
      .hover\:bg-secondary\/80:hover {
        background-color: hsl(var(--secondary) / 0.8);
      }
      .hover\:bg-primary\/10:hover {
        background-color: hsl(var(--primary) / 0.1);
      }
      .hover\:border-primary\/50:hover {
        border-color: hsl(var(--primary) / 0.5);
      }
      .hover\:shadow-md:hover {
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      }
      .hover\:underline:hover {
        text-decoration: underline;
      }
      .group:hover .group-hover\:blur-0 {
        filter: blur(0);
      }
      .group:hover .group-hover\:opacity-100 {
        opacity: 1;
      }
      .bg-gradient-to-r {
        background-image: linear-gradient(to right, var(--tw-gradient-stops));
      }
      .bg-gradient-to-t {
        background-image: linear-gradient(to top, var(--tw-gradient-stops));
      }
      .from-white {
        --tw-gradient-from: white;
        --tw-gradient-stops: var(--tw-gradient-from),
          var(--tw-gradient-to, rgba(255, 255, 255, 0));
      }
      .via-transparent {
        --tw-gradient-stops: var(--tw-gradient-from), transparent,
          var(--tw-gradient-to, rgba(0, 0, 0, 0));
      }
      .to-transparent {
        --tw-gradient-to: transparent;
      }
      .backdrop-blur {
        backdrop-filter: blur(8px);
      }
      .backdrop-blur-sm {
        backdrop-filter: blur(4px);
      }
      .backdrop-blur-md {
        backdrop-filter: blur(12px);
      }
      .pb-safe {
        padding-bottom: env(safe-area-inset-bottom, 0);
      }
      .max-w-md {
        max-width: 28rem;
      }
      .mx-auto {
        margin-left: auto;
        margin-right: auto;
      }
      .-mx-4 {
        margin-left: -16px;
        margin-right: -16px;
      }
      .px-4 {
        padding-left: 16px;
        padding-right: 16px;
      }
      .pl-9 {
        padding-left: 36px;
      }
      .ml-1 {
        margin-left: 4px;
      }
      .ml-2 {
        margin-left: 8px;
      }
      .ml-3 {
        margin-left: 12px;
      }
      .ml-auto {
        margin-left: auto;
      }
      .mr-2 {
        margin-right: 8px;
      }
      .mr-3 {
        margin-right: 12px;
      }
      .-ml-2 {
        margin-left: -8px;
      }
      .-mr-2 {
        margin-right: -8px;
      }
      .shrink-0 {
        flex-shrink: 0;
      }
      .flex-1 {
        flex: 1 1 0%;
      }
      .min-w-0 {
        min-width: 0;
      }
      .w-10 {
        width: 40px;
      }
      .h-10 {
        height: 40px;
      }
      .w-8 {
        width: 32px;
      }
      .h-8 {
        height: 32px;
      }
      .w-16 {
        width: 64px;
      }
      .h-16 {
        height: 64px;
      }
      .w-12 {
        width: 48px;
      }
      .h-12 {
        height: 48px;
      }
      .h-32 {
        height: 128px;
      }
      .w-32 {
        width: 128px;
      }
      .h-5 {
        height: 20px;
      }
      .w-5 {
        width: 20px;
      }
      .h-4 {
        height: 16px;
      }
      .w-4 {
        width: 16px;
      }
      .h-3 {
        height: 12px;
      }
      .w-3 {
        width: 12px;
      }
      .h-6 {
        height: 24px;
      }
      .w-6 {
        width: 24px;
      }
      .text-\[10px\] {
        font-size: 10px;
      }
      .text-\[12px\] {
        font-size: 12px;
      }
      .px-1\.5 {
        padding-left: 6px;
        padding-right: 6px;
      }
      .pt-2 {
        padding-top: 8px;
      }
      .pt-4 {
        padding-top: 16px;
      }
      .pt-6 {
        padding-top: 24px;
      }
      .pb-2 {
        padding-bottom: 8px;
      }
      .pb-8 {
        padding-bottom: 32px;
      }
      .p-0 {
        padding: 0;
      }
      .p-3 {
        padding: 12px;
      }
      .p-4 {
        padding: 16px;
      }
      .p-6 {
        padding: 24px;
      }
      .last\:border-0:last-child {
        border-width: 0;
      }
      .font-semibold {
        font-weight: 600;
      }
      .font-normal {
        font-weight: 400;
      }
      .uppercase {
        text-transform: uppercase;
      }
      .tracking-wider {
        letter-spacing: 0.05em;
      }
      .transition-colors {
        transition-property: color, background-color, border-color;
        transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
        transition-duration: 150ms;
      }
      .transition-shadow {
        transition-property: box-shadow;
        transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
        transition-duration: 150ms;
      }
      .duration-500 {
        transition-duration: 500ms;
      }
      .justify-start {
        justify-content: flex-start;
      }
      .text-left {
        text-align: left;
      }
      .text-red-500 {
        color: rgb(239, 68, 68);
      }
      .text-red-600 {
        color: rgb(220, 38, 38);
      }
      .text-green-500 {
        color: rgb(34, 197, 94);
      }
      .text-green-600 {
        color: rgb(22, 163, 74);
      }
      .text-blue-600 {
        color: rgb(37, 99, 235);
      }
      .bg-blue-50 {
        background-color: rgb(239, 246, 255);
      }
      .bg-gray-50 {
        background-color: rgb(249, 250, 251);
      }
      .bg-gray-100 {
        background-color: rgb(243, 244, 246);
      }
      .bg-gray-200 {
        background-color: rgb(229, 231, 235);
      }
      .text-gray-600 {
        color: rgb(75, 85, 99);
      }
      .text-gray-700 {
        color: rgb(55, 65, 81);
      }
      .text-gray-900 {
        color: rgb(17, 24, 39);
      }
      .bg-green-50 {
        background-color: rgb(240, 253, 244);
      }
      .bg-green-100 {
        background-color: rgb(220, 252, 231);
      }
      .text-green-700 {
        color: rgb(21, 128, 61);
      }
      .bg-blue-100 {
        background-color: rgb(219, 234, 254);
      }
      .text-blue-700 {
        color: rgb(29, 78, 216);
      }
      .bg-amber-100 {
        background-color: rgb(254, 243, 199);
      }
      .text-amber-700 {
        color: rgb(180, 83, 9);
      }
      .border-green-200 {
        border-color: rgb(187, 247, 208);
      }
      .bg-slate-50 {
        background-color: rgb(248, 250, 252);
      }
      .bg-slate-900 {
        background-color: rgb(15, 23, 42);
      }
      .text-slate-300 {
        color: rgb(203, 213, 225);
      }
      .text-slate-900 {
        color: rgb(15, 23, 42);
      }
      .hover\:bg-slate-100:hover {
        background-color: rgb(241, 245, 249);
      }
      .hover\:bg-red-50:hover {
        background-color: rgb(254, 242, 242);
      }
      .hover\:text-red-600:hover {
        color: rgb(220, 38, 38);
      }
      .border-dashed {
        border-style: dashed;
      }
      .border-none {
        border: none;
      }
      .font-mono {
        font-family: ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas,
          "Liberation Mono", monospace;
      }
      .hover\:text-foreground:hover {
        color: hsl(var(--foreground));
      }
    </style>
    <title>ProDocsSystem Bot</title>
  </head>
  <body>
    <div id="root" class="app-container">
      <main>
        <!-- Pages -->
        <div id="page-home" class="page active">
          <div class="container space-y-6">
            <!-- Header -->
            <div class="flex justify-between items-center">
              <div>
                <h1 id="home-greeting" class="text-xl font-bold">–ü—Ä–∏–≤–µ—Ç! üëã</h1>
                <p class="text-sm text-muted flex items-center gap-1">
                  –£ –≤–∞—Å –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç
                  <a
                    href="#"
                    data-route="/premium"
                    class="text-primary font-medium hover:underline ml-1"
                    >–ê–ø–≥—Ä–µ–π–¥</a
                  >
                </p>
              </div>
              <div
                class="rounded-full w-10 h-10 bg-primary/10 flex items-center justify-center text-primary font-bold overflow-hidden"
              >
                <img
                  id="home-avatar-img"
                  src=""
                  alt="–ê–≤–∞—Ç–∞—Ä"
                  class="w-full h-full object-cover hidden"
                />
                <span id="home-avatar-fallback">A</span>
              </div>
            </div>

            <!-- Search -->
            <div class="relative">
              <svg
                class="absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted"
                width="16"
                height="16"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <circle cx="11" cy="11" r="8" />
                <path d="m21 21-4.35-4.35" />
              </svg>
              <input
                id="search-input"
                type="text"
                placeholder="–ù–∞–π—Ç–∏ –¥–æ–≥–æ–≤–æ—Ä, –∑–∞—è–≤–ª–µ–Ω–∏–µ..."
                class="input pl-9 bg-secondary/50 border-transparent focus:bg-background transition-colors w-full"
              />
            </div>

            <!-- Categories -->
            <div
              id="category-chips"
              class="flex gap-2 overflow-x-auto pb-2 -mx-4 px-4"
              style="scrollbar-width: none; -ms-overflow-style: none"
            ></div>

            <!-- Search results -->
            <div
              id="search-results"
              class="space-y-3 pt-2"
              style="display: none"
            ></div>

            <!-- Upsell Banner -->
            <div
              class="gradient-primary rounded-2xl p-4 text-white shadow-lg relative overflow-hidden"
            >
              <div class="relative z-10">
                <div class="flex items-center gap-2 mb-2">
                  <span
                    class="badge bg-white/20 hover:bg-white/30 text-white border-none"
                    >–ê–∫—Ü–∏—è</span
                  >
                </div>
                <h3 class="font-bold text-lg leading-tight mb-1">
                  –ü—Ä–µ–º–∏—É–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
                </h3>
                <p class="text-white/90 text-sm mb-3">
                  100+ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –∏ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞.
                </p>
                <a href="#" data-route="/premium">
                  <button
                    class="btn btn-sm bg-white text-primary hover:bg-white/90 font-semibold border-none shadow-sm"
                  >
                    –í—ã–±—Ä–∞—Ç—å —Ç–∞—Ä–∏—Ñ
                  </button>
                </a>
              </div>
              <svg
                class="absolute -right-4 -bottom-4 h-32 w-32 text-white/10 rotate-12"
                width="128"
                height="128"
                viewBox="0 0 24 24"
                fill="currentColor"
              >
                <path
                  d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"
                />
              </svg>
            </div>

            <!-- Popular Documents -->
            <div>
              <div class="flex justify-between items-center mb-3">
                <h2 class="font-bold text-lg">–ü–æ–ø—É–ª—è—Ä–Ω–æ–µ</h2>
                <a
                  href="#"
                  data-route="/templates"
                  class="text-sm text-primary hover:underline"
                  >–í—Å–µ</a
                >
              </div>
              <div class="grid grid-cols-2 gap-3">
                <a
                  href="#"
                  data-route="/create"
                  class="card hover:shadow-md transition-shadow cursor-pointer border-border/50 bg-card"
                >
                  <div class="card-content flex flex-col gap-3">
                    <div class="flex justify-between items-start">
                      <span class="text-2xl">üìÑ</span>
                    </div>
                    <div>
                      <h3 class="font-medium text-sm leading-tight">
                        –î–æ–≥–æ–≤–æ—Ä —É—Å–ª—É–≥
                      </h3>
                      <span class="text-xs text-muted mt-1 block"
                        >–°–æ–∑–¥–∞—Ç—å –∑–∞ 2 –º–∏–Ω</span
                      >
                    </div>
                  </div>
                </a>
                <a
                  href="#"
                  data-route="/create"
                  class="card hover:shadow-md transition-shadow cursor-pointer border-border/50 bg-card"
                >
                  <div class="card-content flex flex-col gap-3">
                    <div class="flex justify-between items-start">
                      <span class="text-2xl">‚úÖ</span>
                    </div>
                    <div>
                      <h3 class="font-medium text-sm leading-tight">
                        –ê–∫—Ç —Ä–∞–±–æ—Ç
                      </h3>
                      <span class="text-xs text-muted mt-1 block"
                        >–°–æ–∑–¥–∞—Ç—å –∑–∞ 2 –º–∏–Ω</span
                      >
                    </div>
                  </div>
                </a>
                <a
                  href="#"
                  data-route="/create"
                  class="card hover:shadow-md transition-shadow cursor-pointer border-border/50 bg-card"
                >
                  <div class="card-content flex flex-col gap-3">
                    <div class="flex justify-between items-start">
                      <span class="text-2xl">üí∞</span>
                    </div>
                    <div>
                      <h3 class="font-medium text-sm leading-tight">
                        –°—á–µ—Ç –Ω–∞ –æ–ø–ª–∞—Ç—É
                      </h3>
                      <span class="text-xs text-muted mt-1 block"
                        >–°–æ–∑–¥–∞—Ç—å –∑–∞ 2 –º–∏–Ω</span
                      >
                    </div>
                  </div>
                </a>
                <a
                  href="#"
                  data-route="/create"
                  class="card hover:shadow-md transition-shadow cursor-pointer border-border/50 bg-card"
                >
                  <div class="card-content flex flex-col gap-3">
                    <div class="flex justify-between items-start">
                      <span class="text-2xl">‚öñÔ∏è</span>
                      <span
                        class="badge badge-secondary h-5 px-1.5 text-[10px] bg-amber-100 text-amber-700"
                        >PRO</span
                      >
                    </div>
                    <div>
                      <h3 class="font-medium text-sm leading-tight">
                        –ü—Ä–µ—Ç–µ–Ω–∑–∏—è
                      </h3>
                      <span class="text-xs text-muted mt-1 block"
                        >–°–æ–∑–¥–∞—Ç—å –∑–∞ 2 –º–∏–Ω</span
                      >
                    </div>
                  </div>
                </a>
              </div>
            </div>

            <!-- Recent History Snippet -->
            <div class="pt-2" id="home-recent-block" style="display: none">
              <h2 class="font-bold text-lg mb-3">–ù–µ–¥–∞–≤–Ω–∏–µ</h2>
              <div class="card border-border/50 bg-secondary/20">
                <div class="p-0" id="home-recent-list"></div>
              </div>
            </div>
          </div>
        </div>

        <!-- All pages embedded -->
        <div id="page-create" class="page">
          <div
            class="min-h-screen bg-background pb-safe font-sans max-w-md mx-auto flex flex-col"
          >
            <div class="sticky-header">
              <div class="container">
                <div class="flex items-center gap-3 mb-4">
                  <button id="create-prev" class="btn btn-ghost btn-icon -ml-2">
                    <svg
                      width="20"
                      height="20"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                    >
                      <polyline points="15 18 9 12 15 6" />
                    </svg>
                  </button>
                  <div class="flex-1">
                    <h1 class="font-bold text-lg leading-none">
                      –î–æ–≥–æ–≤–æ—Ä —É—Å–ª—É–≥
                    </h1>
                    <span class="text-xs text-muted">–ß–µ—Ä–Ω–æ–≤–∏–∫</span>
                  </div>
                  <button
                    class="btn btn-ghost text-primary text-sm font-medium"
                  >
                    –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
                  </button>
                </div>
                <div class="space-y-1">
                  <div
                    class="flex justify-between text-xs font-medium text-muted"
                  >
                    <span id="step-1-label" class="step-label text-primary"
                      >–î–∞–Ω–Ω—ã–µ</span
                    >
                    <span id="step-2-label" class="step-label">–£—Å–ª–æ–≤–∏—è</span>
                    <span id="step-3-label" class="step-label">–ì–æ—Ç–æ–≤–æ</span>
                  </div>
                  <div class="progress">
                    <div
                      id="create-progress"
                      class="progress-bar"
                      style="width: 33.33%"
                    ></div>
                  </div>
                </div>
              </div>
            </div>
            <main class="flex-1 container overflow-y-auto">
              <div
                id="create-step-1"
                class="create-step space-y-6"
                style="display: block"
              >
                <div class="space-y-4">
                  <div class="flex items-center justify-between">
                    <h2 class="text-lg font-bold">–°—Ç–æ—Ä–æ–Ω—ã –¥–æ–≥–æ–≤–æ—Ä–∞</h2>
                    <button class="btn btn-outline btn-sm h-7 text-xs">
                      –ó–∞–ø–æ–ª–Ω–∏—Ç—å –∏–∑ –ø—Ä–æ—Ñ–∏–ª—è
                    </button>
                  </div>
                  <div class="space-y-3">
                    <label class="text-sm font-medium">–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å (–í—ã)</label>
                    <input
                      type="text"
                      placeholder="–§–ò–û –∏–ª–∏ –ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏"
                      value="–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤–∏—á"
                      class="input"
                    />
                    <input type="text" placeholder="–ò–ù–ù" class="input" />
                  </div>
                  <div class="space-y-3 pt-2">
                    <label class="text-sm font-medium">–ó–∞–∫–∞–∑—á–∏–∫ (–ö–ª–∏–µ–Ω—Ç)</label>
                    <input
                      type="text"
                      placeholder="–§–ò–û –∏–ª–∏ –ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏"
                      class="input"
                    />
                    <input
                      type="text"
                      placeholder="–ò–ù–ù (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)"
                      class="input"
                    />
                  </div>
                  <div class="flex items-center gap-2 pt-2">
                    <input
                      type="checkbox"
                      id="save-template"
                      class="rounded border-gray-300 text-primary focus:ring-primary"
                    />
                    <label for="save-template" class="text-sm text-muted"
                      >–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞ –¥–ª—è –±—É–¥—É—â–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤</label
                    >
                  </div>
                </div>
              </div>
              <div
                id="create-step-2"
                class="create-step space-y-6"
                style="display: none"
              >
                <div class="space-y-4">
                  <h2 class="text-lg font-bold">–£—Å–ª–æ–≤–∏—è –∏ –¥–µ—Ç–∞–ª–∏</h2>
                  <div class="space-y-3">
                    <label class="text-sm font-medium">–ü—Ä–µ–¥–º–µ—Ç –¥–æ–≥–æ–≤–æ—Ä–∞</label>
                    <input
                      type="text"
                      placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –≤–µ–±-—Å–∞–π—Ç–∞"
                      class="input"
                    />
                  </div>
                  <div class="grid grid-cols-2 gap-3">
                    <div class="space-y-2">
                      <label class="text-sm font-medium">–°—É–º–º–∞ (‚ÇΩ)</label>
                      <input type="number" placeholder="0.00" class="input" />
                    </div>
                    <div class="space-y-2">
                      <label class="text-sm font-medium">–°—Ä–æ–∫ (–¥–Ω–µ–π)</label>
                      <input type="number" placeholder="10" class="input" />
                    </div>
                  </div>
                  <div class="space-y-3 pt-4">
                    <label
                      class="text-muted text-xs uppercase tracking-wider font-semibold"
                      >–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ–ø—Ü–∏–∏</label
                    >
                    <div
                      class="upsell-card card border-dashed border-primary/30 bg-primary/5 cursor-pointer hover:bg-primary/10 transition-colors"
                    >
                      <div
                        class="card-content flex items-center justify-between"
                      >
                        <div class="flex items-center gap-3">
                          <div
                            class="rounded-full w-8 h-8 bg-primary/20 flex items-center justify-center"
                          >
                            <svg
                              class="h-4 w-4 text-primary"
                              width="16"
                              height="16"
                              viewBox="0 0 24 24"
                              fill="none"
                              stroke="currentColor"
                              stroke-width="2"
                            >
                              <rect
                                x="3"
                                y="11"
                                width="18"
                                height="11"
                                rx="2"
                                ry="2"
                              />
                              <path d="M7 11V7a5 5 0 0 1 10 0v4" />
                            </svg>
                          </div>
                          <div>
                            <p class="text-sm font-medium">
                              –®—Ç—Ä–∞—Ñ—ã –∑–∞ –ø—Ä–æ—Å—Ä–æ—á–∫—É
                            </p>
                            <p class="text-xs text-muted">
                              –ó–∞—â–∏—Ç–∏—Ç–µ —Å–µ–±—è –æ—Ç –∑–∞–¥–µ—Ä–∂–µ–∫
                            </p>
                          </div>
                        </div>
                        <span
                          class="badge badge-secondary bg-primary/20 text-primary border-none"
                          >PRO</span
                        >
                      </div>
                    </div>
                    <div
                      class="upsell-card card border-dashed border-primary/30 bg-primary/5 cursor-pointer hover:bg-primary/10 transition-colors"
                    >
                      <div
                        class="card-content flex items-center justify-between"
                      >
                        <div class="flex items-center gap-3">
                          <div
                            class="rounded-full w-8 h-8 bg-primary/20 flex items-center justify-center"
                          >
                            <svg
                              class="h-4 w-4 text-primary"
                              width="16"
                              height="16"
                              viewBox="0 0 24 24"
                              fill="none"
                              stroke="currentColor"
                              stroke-width="2"
                            >
                              <rect
                                x="3"
                                y="11"
                                width="18"
                                height="11"
                                rx="2"
                                ry="2"
                              />
                              <path d="M7 11V7a5 5 0 0 1 10 0v4" />
                            </svg>
                          </div>
                          <div>
                            <p class="text-sm font-medium">
                              –ü—É–Ω–∫—Ç –æ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏ (NDA)
                            </p>
                            <p class="text-xs text-muted">
                              –ó–∞–ø—Ä–µ—Ç –Ω–∞ —Ä–∞–∑–≥–ª–∞—à–µ–Ω–∏–µ
                            </p>
                          </div>
                        </div>
                        <span
                          class="badge badge-secondary bg-primary/20 text-primary border-none"
                          >PRO</span
                        >
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div
                id="create-step-3"
                class="create-step space-y-6"
                style="display: none"
              >
                <div class="space-y-4">
                  <div class="flex items-center justify-between">
                    <h2 class="text-lg font-bold">–ì–æ—Ç–æ–≤–æ –∫ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏</h2>
                    <span
                      class="badge badge-outline text-green-600 border-green-200 bg-green-50"
                      >–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ</span
                    >
                  </div>
                  <div
                    class="aspect-document bg-white border rounded-xl shadow-sm p-6 overflow-hidden relative group"
                  >
                    <div
                      class="space-y-4 opacity-50 blur-[1px] group-hover:blur-0 group-hover:opacity-100 transition-all duration-500"
                    >
                      <div class="h-4 w-3/4 bg-gray-200 rounded"></div>
                      <div class="space-y-2">
                        <div class="h-2 w-full bg-gray-100 rounded"></div>
                        <div class="h-2 w-full bg-gray-100 rounded"></div>
                        <div class="h-2 w-5/6 bg-gray-100 rounded"></div>
                      </div>
                      <div class="h-20"></div>
                      <div class="space-y-2">
                        <div class="h-2 w-full bg-gray-100 rounded"></div>
                        <div class="h-2 w-4/6 bg-gray-100 rounded"></div>
                      </div>
                    </div>
                    <div
                      class="absolute inset-0 flex items-center justify-center bg-gradient-to-t from-white via-transparent to-transparent"
                    >
                      <button
                        class="btn btn-outline bg-white/80 backdrop-blur shadow-sm"
                      >
                        –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä
                      </button>
                    </div>
                  </div>
                  <div class="space-y-3">
                    <div
                      class="flex items-center gap-2 text-sm text-muted justify-center"
                    >
                      <svg
                        class="h-4 w-4 text-green-500"
                        width="16"
                        height="16"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                      >
                        <polyline points="20 6 9 17 4 12" />
                      </svg>
                      <span>–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç —Å–æ–∑–¥–∞–ª–∏ 1,243 —Ä–∞–∑–∞</span>
                    </div>
                    <button
                      class="btn btn-default btn-full h-12 text-lg font-bold shadow-lg shadow-primary/20"
                      style="background-color: #31b545"
                    >
                      –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç
                    </button>
                    <div class="grid grid-cols-3 gap-2">
                      <button
                        class="btn btn-outline h-10 text-xs flex flex-col gap-0 py-1"
                      >
                        <svg
                          class="h-3 w-3 mb-1"
                          width="12"
                          height="12"
                          viewBox="0 0 24 24"
                          fill="none"
                          stroke="currentColor"
                          stroke-width="2"
                        >
                          <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                          <polyline points="7 10 12 15 17 10" />
                          <line x1="12" y1="15" x2="12" y2="3" />
                        </svg>
                        DOCX
                      </button>
                      <button
                        class="btn btn-outline h-10 text-xs flex flex-col gap-0 py-1"
                      >
                        <svg
                          class="h-3 w-3 mb-1"
                          width="12"
                          height="12"
                          viewBox="0 0 24 24"
                          fill="none"
                          stroke="currentColor"
                          stroke-width="2"
                        >
                          <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                          <polyline points="7 10 12 15 17 10" />
                          <line x1="12" y1="15" x2="12" y2="3" />
                        </svg>
                        PDF
                      </button>
                      <button
                        class="btn btn-outline h-10 text-xs flex flex-col gap-0 py-1"
                      >
                        <svg
                          class="h-3 w-3 mb-1"
                          width="12"
                          height="12"
                          viewBox="0 0 24 24"
                          fill="none"
                          stroke="currentColor"
                          stroke-width="2"
                        >
                          <path
                            d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"
                          />
                          <polyline points="22,6 12,13 2,6" />
                        </svg>
                        Email
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </main>
            <div class="container border-t border-border/50 bg-background">
              <button
                id="create-footer-btn"
                class="btn btn-default btn-full h-11 text-base shadow-md"
              >
                –î–∞–ª–µ–µ
                <svg
                  class="ml-2"
                  width="16"
                  height="16"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <path d="m9 18 6-6-6-6" />
                </svg>
              </button>
              <button
                id="create-next"
                class="btn btn-default btn-full h-11 text-base shadow-md"
                style="display: none"
              >
                –î–∞–ª–µ–µ
                <svg
                  class="ml-2"
                  width="16"
                  height="16"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <path d="m9 18 6-6-6-6" />
                </svg>
              </button>
            </div>
            <div id="upsell-modal" class="modal-overlay" style="display: none">
              <div class="modal-content space-y-4">
                <div
                  class="rounded-full w-12 h-12 gradient-amber flex items-center justify-center mx-auto mb-2"
                >
                  <svg
                    class="h-6 w-6 text-white"
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                    fill="currentColor"
                  >
                    <path
                      d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"
                    />
                  </svg>
                </div>
                <div class="text-center space-y-2">
                  <h3 class="text-xl font-bold">–¢–æ–ª—å–∫–æ –¥–ª—è Premium</h3>
                  <p class="text-muted text-sm">
                    –ü–æ–ª—É—á–∏—Ç–µ –¥–æ—Å—Ç—É–ø –∫ –ø—É–Ω–∫—Ç–∞–º –æ —à—Ç—Ä–∞—Ñ–∞—Ö, NDA –∏ –µ—â–µ 100+ —à–∞–±–ª–æ–Ω–∞–º
                    –≤—Å–µ–≥–æ –∑–∞ 299‚ÇΩ.
                  </p>
                </div>
                <div class="pt-2 space-y-3">
                  <a
                    href="#"
                    data-route="/premium"
                    class="btn btn-default btn-full gradient-amber text-white font-bold h-11 border-0"
                    >–ü–æ–¥–∫–ª—é—á–∏—Ç—å Premium</a
                  >
                  <button id="upsell-close" class="btn btn-ghost btn-full">
                    –ù–µ—Ç, —Å–ø–∞—Å–∏–±–æ
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div id="page-history" class="page">
          <div class="container space-y-4 pb-8">
            <h1 class="text-2xl font-bold">–î–æ–∫—É–º–µ–Ω—Ç—ã</h1>
            <p class="text-sm text-muted">
              –í—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã, —Å–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º.
            </p>

            <!-- –ü–æ–∏—Å–∫ –ø–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º (—Å—Ç—Ä–∞–Ω–∏—Ü–∞ –î–æ–∫—É–º–µ–Ω—Ç—ã) -->
            <div class="flex gap-2">
              <div class="relative flex-1">
                <svg
                  class="absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted"
                  width="16"
                  height="16"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <circle cx="11" cy="11" r="8" />
                  <path d="m21 21-4.35-4.35" />
                </svg>
                <input
                  id="documents-search-input"
                  type="text"
                  placeholder="–ü–æ–∏—Å–∫ –ø–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º..."
                  class="input pl-9 bg-secondary/50 border-transparent focus:bg-background"
                />
              </div>
            </div>

            <!-- –í–∫–ª–∞–¥–∫–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π -->
            <div
              id="documents-filter-tabs"
              class="flex gap-2 overflow-x-auto pb-2 -mx-4 px-4"
              style="scrollbar-width: none"
            ></div>

            <div id="documents-list" class="space-y-4"></div>
          </div>
        </div>
        <div id="page-pricing" class="page">
          <div class="container space-y-6">
            <div class="text-center space-y-2 pt-4">
              <h1 class="text-2xl font-bold">–í—ã–±–µ—Ä–∏—Ç–µ —Å–≤–æ–π –ø–ª–∞–Ω</h1>
              <p class="text-muted">
                –û—Ç–∫—Ä–æ–π—Ç–µ –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º –±–æ—Ç–∞
              </p>
            </div>
            <div class="space-y-4">
              <div class="card border-border/50 relative overflow-hidden">
                <div class="card-content pb-2">
                  <h3 class="font-bold text-lg">–ë–∞–∑–æ–≤—ã–π</h3>
                  <div class="text-2xl font-bold">
                    0 ‚ÇΩ
                    <span class="text-sm font-normal text-muted">/ –º–µ—Å</span>
                  </div>
                </div>
                <div class="card-content space-y-2 text-sm">
                  <div class="flex gap-2">
                    <svg
                      class="h-4 w-4 text-primary shrink-0"
                      width="16"
                      height="16"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                    >
                      <polyline points="20 6 9 17 4 12" />
                    </svg>
                    <span>5 –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –≤ –º–µ—Å—è—Ü</span>
                  </div>
                  <div class="flex gap-2">
                    <svg
                      class="h-4 w-4 text-primary shrink-0"
                      width="16"
                      height="16"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                    >
                      <polyline points="20 6 9 17 4 12" />
                    </svg>
                    <span>–ë–∞–∑–æ–≤—ã–µ —à–∞–±–ª–æ–Ω—ã</span>
                  </div>
                  <div class="flex gap-2 text-muted">
                    <svg
                      class="h-4 w-4 shrink-0"
                      width="16"
                      height="16"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                    >
                      <line x1="18" y1="6" x2="6" y2="18" />
                      <line x1="6" y1="6" x2="18" y2="18" />
                    </svg>
                    <span>–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –ø—É–Ω–∫—Ç—ã (NDA)</span>
                  </div>
                </div>
                <div class="card-content">
                  <button class="btn btn-secondary btn-full" disabled>
                    –¢–µ–∫—É—â–∏–π —Ç–∞—Ä–∏—Ñ
                  </button>
                </div>
              </div>
              <div
                class="card border-primary shadow-lg shadow-primary/10 relative overflow-hidden bg-primary/5"
              >
                <div
                  class="absolute top-0 right-0 bg-primary text-white text-[10px] font-bold px-2 py-1 rounded-bl-lg"
                >
                  –†–ï–ö–û–ú–ï–ù–î–£–ï–ú
                </div>
                <div class="card-content pb-2">
                  <h3 class="font-bold text-lg text-primary">Premium</h3>
                  <div class="text-2xl font-bold">
                    299 ‚ÇΩ
                    <span class="text-sm font-normal text-muted">/ –º–µ—Å</span>
                  </div>
                  <p class="text-xs text-green-600 font-medium">
                    –≠–∫–æ–Ω–æ–º–∏—è 20% –ø—Ä–∏ –æ–ø–ª–∞—Ç–µ –∑–∞ –≥–æ–¥
                  </p>
                </div>
                <div class="card-content space-y-2 text-sm">
                  <div class="flex gap-2">
                    <svg
                      class="h-4 w-4 text-primary shrink-0"
                      width="16"
                      height="16"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                    >
                      <polyline points="20 6 9 17 4 12" />
                    </svg>
                    <span class="font-medium">–ë–µ–∑–ª–∏–º–∏—Ç–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã</span>
                  </div>
                  <div class="flex gap-2">
                    <svg
                      class="h-4 w-4 text-primary shrink-0"
                      width="16"
                      height="16"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                    >
                      <polyline points="20 6 9 17 4 12" />
                    </svg>
                    <span>–í—Å–µ 100+ —à–∞–±–ª–æ–Ω–æ–≤ (NDA, –û—Ñ–µ—Ä—Ç—ã)</span>
                  </div>
                  <div class="flex gap-2">
                    <svg
                      class="h-4 w-4 text-primary shrink-0"
                      width="16"
                      height="16"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                    >
                      <polyline points="20 6 9 17 4 12" />
                    </svg>
                    <span>–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ 24/7</span>
                  </div>
                  <div class="flex gap-2">
                    <svg
                      class="h-4 w-4 text-primary shrink-0"
                      width="16"
                      height="16"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                    >
                      <polyline points="20 6 9 17 4 12" />
                    </svg>
                    <span>–ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π</span>
                  </div>
                </div>
                <div class="card-content">
                  <button
                    class="btn btn-default btn-full"
                    style="background-color: #31b545"
                  >
                    –í—ã–±—Ä–∞—Ç—å Premium
                  </button>
                </div>
              </div>
              <div
                class="card border-border/50 bg-slate-50 dark:bg-slate-900/50"
              >
                <div class="card-content pb-2">
                  <h3 class="font-bold text-lg">–ë–∏–∑–Ω–µ—Å</h3>
                  <div class="text-2xl font-bold">
                    990 ‚ÇΩ
                    <span class="text-sm font-normal text-muted">/ –º–µ—Å</span>
                  </div>
                </div>
                <div class="card-content space-y-2 text-sm">
                  <div class="flex gap-2">
                    <svg
                      class="h-4 w-4 text-primary shrink-0"
                      width="16"
                      height="16"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                    >
                      <polyline points="20 6 9 17 4 12" />
                    </svg>
                    <span>–í—Å–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ Premium</span>
                  </div>
                  <div class="flex gap-2">
                    <svg
                      class="h-4 w-4 text-primary shrink-0"
                      width="16"
                      height="16"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                    >
                      <polyline points="20 6 9 17 4 12" />
                    </svg>
                    <span>–î–æ 5 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</span>
                  </div>
                  <div class="flex gap-2">
                    <svg
                      class="h-4 w-4 text-primary shrink-0"
                      width="16"
                      height="16"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                    >
                      <polyline points="20 6 9 17 4 12" />
                    </svg>
                    <span>–ë—Ä–µ–Ω–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤</span>
                  </div>
                  <div class="flex gap-2">
                    <svg
                      class="h-4 w-4 text-primary shrink-0"
                      width="16"
                      height="16"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                    >
                      <polyline points="20 6 9 17 4 12" />
                    </svg>
                    <span>API –¥–æ—Å—Ç—É–ø</span>
                  </div>
                </div>
                <div class="card-content">
                  <button
                    class="btn btn-outline btn-full border-primary text-primary hover:bg-primary/5"
                  >
                    –°–≤—è–∑–∞—Ç—å—Å—è —Å –æ—Ç–¥–µ–ª–æ–º –ø—Ä–æ–¥–∞–∂
                  </button>
                </div>
              </div>
            </div>
            <div class="pt-4 pb-8">
              <h2 class="font-bold text-lg mb-4">–ß–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã</h2>
              <div class="space-y-0">
                <div class="accordion-item">
                  <button class="accordion-trigger">
                    –ú–æ–∂–Ω–æ –ª–∏ –æ—Ç–º–µ–Ω–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É?<svg
                      class="accordion-icon h-4 w-4"
                      width="16"
                      height="16"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                    >
                      <polyline points="6 9 12 15 18 9" />
                    </svg>
                  </button>
                  <div class="accordion-content" style="display: none">
                    –î–∞, –≤—ã –º–æ–∂–µ—Ç–µ –æ—Ç–º–µ–Ω–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö
                    –ø—Ä–æ—Ñ–∏–ª—è.
                  </div>
                </div>
                <div class="accordion-item">
                  <button class="accordion-trigger">
                    –ï—Å—Ç—å –ª–∏ –ø—Ä–æ–±–Ω—ã–π –ø–µ—Ä–∏–æ–¥?<svg
                      class="accordion-icon h-4 w-4"
                      width="16"
                      height="16"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                    >
                      <polyline points="6 9 12 15 18 9" />
                    </svg>
                  </button>
                  <div class="accordion-content" style="display: none">
                    –ú—ã –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ–º 7 –¥–Ω–µ–π –±–µ—Å–ø–ª–∞—Ç–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ Premium
                    —Ñ—É–Ω–∫—Ü–∏—è–º –¥–ª—è –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.
                  </div>
                </div>
                <div class="accordion-item">
                  <button class="accordion-trigger">
                    –í –∫–∞–∫–æ–º —Ñ–æ—Ä–º–∞—Ç–µ —Å–∫–∞—á–∏–≤–∞—é—Ç—Å—è –¥–æ–∫—É–º–µ–Ω—Ç—ã?<svg
                      class="accordion-icon h-4 w-4"
                      width="16"
                      height="16"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                    >
                      <polyline points="6 9 12 15 18 9" />
                    </svg>
                  </button>
                  <div class="accordion-content" style="display: none">
                    –î–æ–∫—É–º–µ–Ω—Ç—ã –¥–æ—Å—Ç—É–ø–Ω—ã –≤ —Ñ–æ—Ä–º–∞—Ç–∞—Ö DOCX (Word) –∏ PDF.
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div id="page-profile" class="page">
          <div class="container space-y-6">
            <div
              class="flex items-center gap-4 bg-card p-4 rounded-xl border border-border/50 shadow-sm"
            >
              <div
                class="rounded-full w-16 h-16 border-2 border-primary/20 flex items-center justify-center bg-primary/10 text-primary font-bold overflow-hidden"
              >
                <img
                  id="profile-avatar"
                  src=""
                  alt="–ê–≤–∞—Ç–∞—Ä"
                  class="w-full h-full object-cover hidden"
                />
                <span id="profile-avatar-fallback">AI</span>
              </div>
              <div class="flex-1">
                <h2 id="profile-name" class="font-bold text-lg">
                  –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
                </h2>
                <div class="flex items-center gap-2 mt-1">
                  <span
                    class="badge badge-outline font-normal text-muted bg-secondary/50"
                    >Free Plan</span
                  ><span id="profile-id" class="text-xs text-muted">ID: -</span>
                </div>
              </div>
            </div>
            <div
              class="card bg-gradient-to-r from-slate-900 to-slate-800 text-white border-none"
            >
              <div class="card-content flex justify-between items-center">
                <div>
                  <p class="font-medium text-sm text-slate-300">–ü–æ–¥–ø–∏—Å–∫–∞</p>
                  <p class="font-bold">–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π —Ç–∞—Ä–∏—Ñ</p>
                </div>
                <a href="#" data-route="/premium"
                  ><button
                    class="btn btn-sm bg-white text-slate-900 hover:bg-slate-100 font-semibold"
                  >
                    –£–ª—É—á—à–∏—Ç—å
                  </button></a
                >
              </div>
            </div>
            <div class="space-y-4">
              <div class="flex items-center justify-between">
                <h3 class="font-bold text-lg">–ú–æ–∏ —Ä–µ–∫–≤–∏–∑–∏—Ç—ã</h3>
                <button class="btn btn-ghost btn-sm h-8 text-xs text-primary">
                  –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
                </button>
              </div>
              <div
                class="grid gap-3 p-4 bg-card rounded-xl border border-border/50"
              >
                <div class="space-y-1">
                  <label class="text-xs text-muted">–ò–ù–ù</label
                  ><input
                    type="text"
                    value="7729123456"
                    class="input h-9 bg-secondary/20"
                  />
                </div>
                <div class="space-y-1">
                  <label class="text-xs text-muted">–†–∞—Å—á–µ—Ç–Ω—ã–π —Å—á–µ—Ç</label
                  ><input
                    type="text"
                    value="40802810000000001234"
                    class="input h-9 bg-secondary/20"
                  />
                </div>
                <div class="space-y-1">
                  <label class="text-xs text-muted">–ê–¥—Ä–µ—Å</label
                  ><input
                    type="text"
                    value="–≥. –ú–æ—Å–∫–≤–∞, —É–ª. –õ–µ–Ω–∏–Ω–∞, –¥. 1"
                    class="input h-9 bg-secondary/20"
                  />
                </div>
              </div>
            </div>
            <div
              class="space-y-3"
              id="profile-history-block"
              style="display: none"
            >
              <div class="flex items-center justify-between">
                <h3 class="font-bold text-lg">–ò—Å—Ç–æ—Ä–∏—è</h3>
                <button
                  id="profile-history-show-all-btn"
                  class="btn btn-ghost btn-sm h-8 text-xs"
                >
                  –í—Å–µ
                </button>
              </div>
              <div class="space-y-2" id="profile-history-list"></div>
            </div>
            <div class="card bg-primary/5 border-primary/20">
              <div class="card-content space-y-3">
                <div class="flex items-center gap-2 text-primary font-bold">
                  <svg
                    class="h-5 w-5"
                    width="20"
                    height="20"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                  >
                    <polygon
                      points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"
                    />
                  </svg>
                  <h3>–ü—Ä–∏–≥–ª–∞—Å–∏ –¥—Ä—É–≥–∞</h3>
                </div>
                <p class="text-sm text-muted">
                  –ü–æ–ª—É—á–∏—Ç–µ 1 –º–µ—Å—è—Ü Premium –±–µ—Å–ø–ª–∞—Ç–Ω–æ –∑–∞ –∫–∞–∂–¥–æ–≥–æ –¥—Ä—É–≥–∞.
                </p>
                <div class="flex gap-2">
                  <div
                    class="flex-1 bg-background border border-border/50 rounded-md px-3 py-2 text-xs font-mono text-muted flex items-center justify-between"
                  >
                    <span id="ref-link-text">t.me/docgen_bot?start=ref123</span
                    ><svg
                      class="h-3 w-3 cursor-pointer hover:text-foreground"
                      width="12"
                      height="12"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                    >
                      <rect x="9" y="9" width="13" height="13" rx="2" ry="2" />
                      <path
                        d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"
                      />
                    </svg>
                  </div>
                  <button class="btn btn-icon h-9 w-9 shrink-0">
                    <svg
                      class="h-4 w-4"
                      width="16"
                      height="16"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                    >
                      <circle cx="18" cy="5" r="3" />
                      <circle cx="6" cy="12" r="3" />
                      <circle cx="18" cy="19" r="3" />
                      <line x1="8.59" y1="13.51" x2="15.42" y2="17.49" />
                      <line x1="15.41" y1="6.51" x2="8.59" y2="10.49" />
                    </svg>
                  </button>
                </div>
              </div>
            </div>
            <div class="space-y-1 pt-2 pb-8">
              <button
                class="btn btn-ghost btn-full justify-start h-12 font-normal"
              >
                <svg
                  class="mr-3 h-5 w-5 text-muted"
                  width="20"
                  height="20"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <circle cx="12" cy="12" r="3" />
                  <path
                    d="M12 1v6m0 6v6M5.64 5.64l4.24 4.24m4.24 4.24l4.24 4.24M1 12h6m6 0h6M5.64 18.36l4.24-4.24m4.24-4.24l4.24-4.24"
                  />
                </svg>
                –ù–∞—Å—Ç—Ä–æ–π–∫–∏<svg
                  class="ml-auto h-4 w-4 text-muted"
                  width="16"
                  height="16"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <polyline points="9 18 15 12 9 6" />
                </svg></button
              ><button
                class="btn btn-ghost btn-full justify-start h-12 font-normal text-red-500 hover:text-red-600 hover:bg-red-50"
              >
                <svg
                  class="mr-3 h-5 w-5"
                  width="20"
                  height="20"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4" />
                  <polyline points="16 17 21 12 16 7" />
                  <line x1="21" y1="12" x2="9" y2="12" />
                </svg>
                –í—ã–π—Ç–∏
              </button>
            </div>
          </div>
        </div>
        <div id="page-not-found" class="page">
          <div
            class="min-h-screen w-full flex items-center justify-center bg-gray-50"
          >
            <div class="card w-full max-w-md mx-4">
              <div class="card-content pt-6">
                <div class="flex mb-4 gap-2">
                  <svg
                    class="h-8 w-8 text-red-500"
                    width="32"
                    height="32"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                  >
                    <circle cx="12" cy="12" r="10" />
                    <line x1="12" y1="8" x2="12" y2="12" />
                    <line x1="12" y1="16" x2="12.01" y2="16" />
                  </svg>
                  <h1 class="text-2xl font-bold text-gray-900">
                    404 Page Not Found
                  </h1>
                </div>
                <p class="mt-4 text-sm text-gray-600">
                  –°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞. –í–µ—Ä–Ω–∏—Ç–µ—Å—å –Ω–∞
                  <a
                    href="#"
                    data-route="/"
                    class="text-primary hover:underline"
                    >–≥–ª–∞–≤–Ω—É—é</a
                  >.
                </p>
              </div>
            </div>
          </div>
        </div>
        <div id="page-doc-detail" class="page">
          <div class="container space-y-4 pb-8">
            <button
              id="doc-detail-back"
              class="btn btn-ghost btn-icon h-8 w-8 -ml-2 mt-2"
            >
              <svg
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <polyline points="15 18 9 12 15 6" />
              </svg>
            </button>
            <div class="space-y-1">
              <h1 id="doc-detail-title" class="text-2xl font-bold"></h1>
              <p id="doc-detail-category" class="text-sm text-muted"></p>
            </div>
            <div
              id="doc-detail-description"
              class="text-sm text-muted space-y-2"
            ></div>
            <div class="grid grid-cols-2 gap-3 pt-2">
              <button
                id="doc-detail-template-btn"
                class="btn btn-default h-11 text-sm font-semibold"
              >
                üìÑ –®–∞–±–ª–æ–Ω
              </button>
              <button
                id="doc-detail-document-btn"
                class="btn btn-secondary h-11 text-sm font-semibold"
              >
                üìÅ –î–æ–∫—É–º–µ–Ω—Ç
              </button>
            </div>
            <p
              id="doc-detail-status"
              class="text-xs text-muted mt-2 min-h-[1.25rem]"
            ></p>
          </div>
        </div>
      </main>

      <!-- FAB -->
      <a href="#" data-route="/create" class="fab">
        <svg
          width="32"
          height="32"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2.5"
        >
          <line x1="12" y1="5" x2="12" y2="19" />
          <line x1="5" y1="12" x2="19" y2="12" />
        </svg>
      </a>

      <!-- Bottom Navigation -->
      <nav class="bottom-nav">
        <a href="#" data-route="/" class="nav-item active">
          <svg
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" />
            <polyline points="9 22 9 12 15 12 15 22" />
          </svg>
          <span>–ì–ª–∞–≤–Ω–∞—è</span>
        </a>
        <a href="#" data-route="/templates" class="nav-item">
          <svg
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <path
              d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"
            />
            <polyline points="14 2 14 8 20 8" />
            <line x1="16" y1="13" x2="8" y2="13" />
            <line x1="16" y1="17" x2="8" y2="17" />
            <polyline points="10 9 9 9 8 9" />
          </svg>
          <span>–î–æ–∫—É–º–µ–Ω—Ç—ã</span>
        </a>
        <div style="width: 56px"></div>
        <a href="#" data-route="/premium" class="nav-item">
          <svg
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <path
              d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"
            />
          </svg>
          <span>–ü—Ä–µ–º–∏—É–º</span>
        </a>
        <a href="#" data-route="/profile" class="nav-item">
          <svg
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" />
            <circle cx="12" cy="7" r="4" />
          </svg>
          <span>–ü—Ä–æ—Ñ–∏–ª—å</span>
        </a>
      </nav>
    </div>
    <script>
      // –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ Telegram WebApp –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
      function getTelegramWebApp() {
        if (window.Telegram && window.Telegram.WebApp) {
          const tg = window.Telegram.WebApp;
          try {
            if (typeof tg.ready === "function") {
              tg.ready();
            }
          } catch (e) {
            console.warn("Telegram.WebApp.ready() error", e);
          }
          return tg;
        }
        return null;
      }

      // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
      function getCurrentUser() {
        if (tg.initDataUnsafe && tg.initDataUnsafe.user) {
          return tg.initDataUnsafe.user;
        }
        return null;
      }

      const BOT_USERNAME = "ProDocsSystemBot"; // –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø–æ–º–µ–Ω—è–π –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π username –±–æ—Ç–∞
      const CATEGORIES = [
        { slug: "–∞–∫—Ç—ã", name: "–ê–∫—Ç—ã" },
        { slug: "–¥–æ–≥–æ–≤–æ—Ä—ã", name: "–î–æ–≥–æ–≤–æ—Ä—ã" },
        { slug: "–¥–æ–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏", name: "–î–æ–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏" },
        { slug: "—Å–æ–≥–ª–∞—à–µ–Ω–∏—è", name: "–°–æ–≥–ª–∞—à–µ–Ω–∏—è" },
        { slug: "—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è", name: "–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è" },
        { slug: "–ø—Ä–µ—Ç–µ–Ω–∑–∏–∏", name: "–ü—Ä–µ—Ç–µ–Ω–∑–∏–∏ –∏ –ø—Ä–æ—Ç–æ–∫–æ–ª—ã" },
        { slug: "–ø–ª–∞—Ç–µ–∂–Ω—ã–µ", name: "–ü–ª–∞—Ç–µ–∂–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã" },
        { slug: "–æ—Ç—á–µ—Ç—ã", name: "–û—Ç—á—ë—Ç—ã –∏ –æ–ø–∏—Å–∏" },
        { slug: "–∑–∞—è–≤–ª–µ–Ω–∏—è", name: "–ó–∞—è–≤–ª–µ–Ω–∏—è" },
        { slug: "–∫–æ–º–º–µ—Ä—á–µ—Å–∫–∏–µ", name: "–ö–æ–º–º–µ—Ä—á–µ—Å–∫–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã" },
        { slug: "–ø–æ–ª–∏—Ç–∏–∫–∏", name: "–ü–æ–ª–∏—Ç–∏–∫–∏" },
        { slug: "—á–µ–∫–∏", name: "–ß–µ–∫–∏" },
        { slug: "—Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏", name: "–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏" },
      ];

      const CATEGORY_EMOJIS = {
        –∞–∫—Ç—ã: "üßæ",
        –¥–æ–≥–æ–≤–æ—Ä—ã: "üìú",
        –¥–æ–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏: "‚úçÔ∏è",
        —Å–æ–≥–ª–∞—à–µ–Ω–∏—è: "üìù",
        —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è: "üì£",
        –ø—Ä–µ—Ç–µ–Ω–∑–∏–∏: "‚ö†Ô∏è",
        –ø–ª–∞—Ç–µ–∂–Ω—ã–µ: "üí≥",
        –æ—Ç—á–µ—Ç—ã: "üìä",
        –∑–∞—è–≤–ª–µ–Ω–∏—è: "‚úâÔ∏è",
        –∫–æ–º–º–µ—Ä—á–µ—Å–∫–∏–µ: "üè¢",
        –ø–æ–ª–∏—Ç–∏–∫–∏: "üîí",
        —á–µ–∫–∏: "üßæ",
        —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏: "üë§",
      };

      let allDocuments = [];
      let docsByCategory = {};
      let currentDocumentsCategory = "all"; // 'all' –∏–ª–∏ slug –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
      let currentDocumentsSearch = "";
      let currentDocument = null;

      // –ù–µ–¥–∞–≤–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã (—Ö—Ä–∞–Ω–∏–º –ª–æ–∫–∞–ª—å–Ω–æ –ø–æ user_id)
      const RECENT_KEY_PREFIX = "docgen_recent_";
      const RECENT_MAX_ITEMS = 20;

      function getRecentStorageKey() {
        const user = getCurrentUser();
        if (!user || !user.id) return null;
        return RECENT_KEY_PREFIX + String(user.id);
      }

      function loadRecentDocumentsState() {
        const key = getRecentStorageKey();
        if (!key) return [];
        try {
          const raw = localStorage.getItem(key);
          if (!raw) return [];
          const arr = JSON.parse(raw);
          if (!Array.isArray(arr)) return [];
          return arr.filter((item) => item && item.slug);
        } catch (e) {
          console.warn("–û—à–∏–±–∫–∞ —á—Ç–µ–Ω–∏—è –Ω–µ–¥–∞–≤–Ω–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤", e);
          return [];
        }
      }

      function saveRecentDocumentsState(items) {
        const key = getRecentStorageKey();
        if (!key) return;
        try {
          localStorage.setItem(key, JSON.stringify(items || []));
        } catch (e) {
          console.warn("–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–µ–¥–∞–≤–Ω–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤", e);
        }
      }

      function addRecentDocument(slug) {
        if (!slug) return;
        const key = getRecentStorageKey();
        if (!key) return;

        let items = loadRecentDocumentsState();
        const now = Date.now();

        items = items.filter((item) => item.slug !== slug);
        items.unshift({ slug, ts: now });

        if (items.length > RECENT_MAX_ITEMS) {
          items = items.slice(0, RECENT_MAX_ITEMS);
        }
        saveRecentDocumentsState(items);
      }

      function formatRecentDate(ts) {
        if (!ts) return "";
        try {
          const d = new Date(ts);
          return d.toLocaleString("ru-RU", {
            day: "2-digit",
            month: "short",
            hour: "2-digit",
            minute: "2-digit",
          });
        } catch {
          return "";
        }
      }

      function renderHomeRecent() {
        const block = document.getElementById("home-recent-block");
        const listEl = document.getElementById("home-recent-list");
        if (!block || !listEl) return;

        const items = loadRecentDocumentsState();
        listEl.innerHTML = "";

        const docs = [];
        items.forEach((rec) => {
          const doc = allDocuments.find((d) => d.slug === rec.slug);
          if (doc) {
            docs.push({ doc, ts: rec.ts });
          }
        });

        block.style.display = "";

        if (!docs.length) {
          const empty = document.createElement("div");
          empty.className = "p-3 text-xs text-muted";
          empty.textContent =
            "–ü–æ–∫–∞ –Ω–µ—Ç –Ω–µ–¥–∞–≤–Ω–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤. –û—Ç–∫—Ä–æ–π—Ç–µ –∏–ª–∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç, —á—Ç–æ–±—ã –æ–Ω –ø–æ—è–≤–∏–ª—Å—è –∑–¥–µ—Å—å.";
          listEl.appendChild(empty);
          return;
        }

        docs.slice(0, 5).forEach(({ doc, ts }) => {
          const row = document.createElement("div");
          row.className =
            "flex items-center gap-3 p-3 border-b last:border-0 border-border/50 cursor-pointer hover:bg-background/60";

          const iconWrap = document.createElement("div");
          iconWrap.className =
            "rounded-lg w-10 h-10 bg-background flex items-center justify-center border border-border/50";
          iconWrap.innerHTML = '<span class="text-lg">üìÑ</span>';

          const textBox = document.createElement("div");
          textBox.className = "flex-1";
          const title = document.createElement("h4");
          title.className = "text-sm font-medium";
          title.textContent = doc.name;
          const sub = document.createElement("p");
          sub.className = "text-xs text-muted";
          sub.textContent = formatRecentDate(ts);
          textBox.appendChild(title);
          textBox.appendChild(sub);

          const actionBtn = document.createElement("button");
          actionBtn.className = "btn btn-ghost btn-icon h-8 w-8";
          actionBtn.innerHTML =
            '<svg class="h-4 w-4 text-muted" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="9 18 15 12 9 6" /></svg>';
          actionBtn.onclick = (e) => {
            e.stopPropagation();
            openDocumentDetail(doc.slug);
          };

          row.onclick = () => {
            openDocumentDetail(doc.slug);
          };

          row.appendChild(iconWrap);
          row.appendChild(textBox);
          row.appendChild(actionBtn);
          listEl.appendChild(row);
        });
      }

      function renderProfileHistory() {
        const block = document.getElementById("profile-history-block");
        const listEl = document.getElementById("profile-history-list");
        if (!block || !listEl) return;

        const items = loadRecentDocumentsState();
        listEl.innerHTML = "";

        const docs = [];
        items.forEach((rec) => {
          const doc = allDocuments.find((d) => d.slug === rec.slug);
          if (doc) {
            docs.push({ doc, ts: rec.ts });
          }
        });

        block.style.display = "";

        if (!docs.length) {
          const empty = document.createElement("p");
          empty.className = "text-xs text-muted";
          empty.textContent =
            "–ü–æ–∫–∞ –Ω–µ—Ç –∏—Å—Ç–æ—Ä–∏–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∏–ª–∏ –æ—Ç–∫—Ä–æ–π—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç, —á—Ç–æ–±—ã –æ–Ω –ø–æ—è–≤–∏–ª—Å—è –∑–¥–µ—Å—å.";
          listEl.appendChild(empty);
          return;
        }

        docs.slice(0, 10).forEach(({ doc, ts }) => {
          const row = document.createElement("div");
          row.className =
            "flex items-center justify-between p-3 bg-card rounded-lg border border-border/50";

          const left = document.createElement("div");
          left.className = "flex items-center gap-3";

          const icon = document.createElement("div");
          icon.className =
            "rounded w-8 h-8 bg-blue-50 text-blue-600 flex items-center justify-center";
          icon.innerHTML =
            '<svg class="h-4 w-4" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" /><polyline points="14 2 14 8 20 8" /><line x1="16" y1="13" x2="8" y2="13" /><line x1="16" y1="17" x2="8" y2="17" /><polyline points="10 9 9 9 8 9" /></svg>';

          const info = document.createElement("div");
          const title = document.createElement("p");
          title.className = "text-sm font-medium";
          title.textContent = doc.name;
          const meta = document.createElement("p");
          meta.className = "text-[10px] text-muted";
          meta.textContent = formatRecentDate(ts);
          info.appendChild(title);
          info.appendChild(meta);

          left.appendChild(icon);
          left.appendChild(info);

          const status = document.createElement("span");
          status.className = "badge badge-secondary text-[10px]";
          status.textContent = "–ù–µ–¥–∞–≤–Ω–æ";

          row.onclick = () => {
            openDocumentDetail(doc.slug);
          };

          row.appendChild(left);
          row.appendChild(status);
          listEl.appendChild(row);
        });
      }

      async function loadDocuments() {
        try {
          // –û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π –ø—É—Ç—å, —á—Ç–æ–±—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å –∏ –Ω–∞ GitHub Pages
          const res = await fetch("./data/services.json", {
            headers: { "Content-Type": "application/json" },
          });
          if (!res.ok) {
            console.warn("–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å services.json", res.status);
            return;
          }
          const raw = await res.json();
          const servicesArray = Array.isArray(raw)
            ? raw
            : Object.values(raw || {});

          allDocuments = servicesArray
            .map((svc) => {
              if (!svc) return null;
              const name = (svc.name || "").trim();
              const category = (svc.category || "").trim().toLowerCase();
              const slug = String(svc.slug || svc.command || "")
                .trim()
                .toLowerCase();
              const description = svc.description || "";
              if (!name || !category || !slug) return null;
              return { name, category, slug, description };
            })
            .filter(Boolean);

          docsByCategory = {};
          allDocuments.forEach((doc) => {
            if (!docsByCategory[doc.category]) {
              docsByCategory[doc.category] = [];
            }
            docsByCategory[doc.category].push(doc);
          });

          renderCategoriesChips();
          renderDocumentsTabs();
          renderDocumentsPage();
          renderHomeRecent();
          renderProfileHistory();
        } catch (e) {
          console.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ services.json", e);
        }
      }

      function renderCategoriesChips() {
        const chipsContainer = document.getElementById("category-chips");
        if (!chipsContainer) return;
        chipsContainer.innerHTML = "";

        CATEGORIES.forEach((cat) => {
          const btn = document.createElement("button");
          btn.className =
            "btn btn-outline rounded-full whitespace-nowrap bg-background hover:bg-secondary/80 border-border/50";
          const emoji = CATEGORY_EMOJIS[cat.slug] || "üìÑ";
          btn.textContent = `${emoji} ${cat.name}`;
          btn.onclick = () => {
            navigate("/templates");
            setTimeout(() => {
              renderDocumentsPage("", cat.slug);
            }, 0);
          };
          chipsContainer.appendChild(btn);
        });
      }

      function renderDocumentsPage(searchQuery = "", activeCategorySlug = "") {
        const container = document.getElementById("documents-list");
        if (!container) return;

        const query = (searchQuery || "").toLowerCase();
        container.innerHTML = "";

        let anyDocs = false;

        CATEGORIES.forEach((cat) => {
          if (
            activeCategorySlug &&
            activeCategorySlug !== "all" &&
            cat.slug !== activeCategorySlug
          ) {
            return;
          }
          const catDocs = (docsByCategory[cat.slug] || []).filter((doc) => {
            if (!query) return true;
            return doc.name.toLowerCase().includes(query);
          });
          if (!catDocs.length) return;

          anyDocs = true;

          const section = document.createElement("section");
          section.className = "space-y-2";

          const header = document.createElement("div");
          header.className = "flex items-center gap-2";
          const title = document.createElement("h2");
          title.className = "font-bold text-lg";
          const emoji = CATEGORY_EMOJIS[cat.slug] || "üìÑ";
          title.textContent = `${emoji} ${cat.name}`;
          header.appendChild(title);
          section.appendChild(header);

          const list = document.createElement("div");
          list.className = "space-y-2";

          catDocs.forEach((doc) => {
            const row = document.createElement("div");
            row.className =
              "bg-card rounded-xl p-3 border border-border/50 shadow-sm flex items-center justify-between cursor-pointer hover:border-primary/50 transition-colors";

            const left = document.createElement("div");
            left.className = "flex items-center gap-3 overflow-hidden";

            const icon = document.createElement("div");
            icon.className =
              "rounded-lg w-8 h-8 bg-secondary flex items-center justify-center shrink-0";
            icon.innerHTML = "<span>üìÑ</span>";

            const textWrap = document.createElement("div");
            textWrap.className = "min-w-0";
            const nameEl = document.createElement("h3");
            nameEl.className = "font-medium text-sm truncate";
            nameEl.textContent = doc.name;

            textWrap.appendChild(nameEl);
            left.appendChild(icon);
            left.appendChild(textWrap);
            row.appendChild(left);

            row.onclick = () => {
              openDocumentDetail(doc.slug);
            };

            list.appendChild(row);
          });

          section.appendChild(list);
          container.appendChild(section);
        });

        if (!anyDocs) {
          const empty = document.createElement("p");
          empty.className = "text-sm text-muted";
          empty.textContent =
            "–ü–æ–∫–∞ –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–∞–π–ª data/services.json –∑–∞–≥—Ä—É–∂–µ–Ω –Ω–∞ —Ö–æ—Å—Ç–∏–Ω–≥.";
          container.appendChild(empty);
        }
      }

      function setupSearch() {
        const input = document.getElementById("search-input");
        const resultsContainer = document.getElementById("search-results");
        if (!input || !resultsContainer) return;

        input.addEventListener("input", () => {
          const value = input.value.trim();
          if (!value) {
            resultsContainer.style.display = "none";
            resultsContainer.innerHTML = "";
            return;
          }

          const query = value.toLowerCase();
          const matches = allDocuments.filter((doc) =>
            doc.name.toLowerCase().includes(query)
          );

          resultsContainer.innerHTML = "";
          if (!matches.length) {
            resultsContainer.style.display = "none";
            return;
          }

          resultsContainer.style.display = "block";

          matches.slice(0, 30).forEach((doc) => {
            const item = document.createElement("div");
            item.className =
              "bg-card rounded-xl p-3 border border-border/50 shadow-sm flex items-center justify-between cursor-pointer hover:border-primary/50 transition-colors";

            const left = document.createElement("div");
            left.className = "flex flex-col min-w-0";
            const nameEl = document.createElement("h3");
            nameEl.className = "font-medium text-sm truncate";
            nameEl.textContent = doc.name;
            const catEl = document.createElement("span");
            catEl.className = "text-xs text-muted";
            const cat = CATEGORIES.find((c) => c.slug === doc.category);
            catEl.textContent = cat ? cat.name : "";

            left.appendChild(nameEl);
            left.appendChild(catEl);
            item.appendChild(left);

            item.onclick = () => {
              sendToBot("open_document", doc.slug);
            };

            resultsContainer.appendChild(item);
          });
        });
      }

      function renderDocumentsTabs() {
        const tabsContainer = document.getElementById("documents-filter-tabs");
        if (!tabsContainer) return;
        tabsContainer.innerHTML = "";

        const makeTab = (label, slug) => {
          const btn = document.createElement("button");
          btn.className =
            "filter-tab btn btn-sm rounded-full h-8 text-xs px-3 whitespace-nowrap";
          if (slug === currentDocumentsCategory) {
            btn.classList.add("bg-primary", "text-white");
          } else {
            btn.classList.add("bg-secondary");
          }
          btn.textContent = label;
          btn.onclick = () => {
            currentDocumentsCategory = slug;
            renderDocumentsTabs();
            const catSlug =
              currentDocumentsCategory === "all"
                ? ""
                : currentDocumentsCategory;
            renderDocumentsPage(currentDocumentsSearch, catSlug);
          };
          return btn;
        };

        // –í–∫–ª–∞–¥–∫–∞ "–í—Å–µ"
        tabsContainer.appendChild(makeTab("–í—Å–µ", "all"));

        // –û—Å—Ç–∞–ª—å–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
        CATEGORIES.forEach((cat) => {
          tabsContainer.appendChild(makeTab(cat.name, cat.slug));
        });
      }

      function setupDocumentsSearch() {
        const input = document.getElementById("documents-search-input");
        if (!input) return;

        input.addEventListener("input", () => {
          currentDocumentsSearch = input.value.trim();
          const catSlug =
            currentDocumentsCategory === "all" ? "" : currentDocumentsCategory;
          renderDocumentsPage(currentDocumentsSearch, catSlug);
        });
      }

      function sendToBot(actionType, slug) {
        if (!slug) {
          console.warn("sendToBot: slug –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç");
          return;
        }
        const payload = { type: actionType, slug };
        console.log("sendToBot: –æ—Ç–ø—Ä–∞–≤–∫–∞", payload);

        // –û–±–Ω–æ–≤–ª—è–µ–º –ª–æ–∫–∞–ª—å–Ω—É—é –∏—Å—Ç–æ—Ä–∏—é –Ω–µ–¥–∞–≤–Ω–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
        if (
          actionType === "send_template" ||
          actionType === "send_document" ||
          actionType === "open_document"
        ) {
          addRecentDocument(slug);
          renderHomeRecent();
          renderProfileHistory();
        }

        if (!window.Telegram || !window.Telegram.WebApp) {
          console.error(
            "sendToBot: Telegram WebApp API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω. –û—Ç–∫—Ä–æ–π—Ç–µ –º–∏–Ω–∏-–∞–ø–ø —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫—É –±–æ—Ç–∞."
          );
          return;
        }

        try {
          const dataStr = JSON.stringify(payload);
          window.Telegram.WebApp.sendData(dataStr);
          console.log("sendToBot: sendData –≤—ã–∑–≤–∞–Ω —É—Å–ø–µ—à–Ω–æ, –¥–∞–Ω–Ω—ã–µ:", dataStr);
        } catch (e) {
          console.error("sendToBot: –æ—à–∏–±–∫–∞ –ø—Ä–∏ sendData", e);
        }
      }

      function openDocumentDetail(slug) {
        if (!slug) return;
        const doc = allDocuments.find((d) => d.slug === slug);
        if (!doc) return;
        currentDocument = doc;

        const titleEl = document.getElementById("doc-detail-title");
        const catEl = document.getElementById("doc-detail-category");
        const descEl = document.getElementById("doc-detail-description");
        const statusEl = document.getElementById("doc-detail-status");

        if (titleEl) titleEl.textContent = doc.name;

        if (catEl) {
          const cat = CATEGORIES.find((c) => c.slug === doc.category);
          const emoji = CATEGORY_EMOJIS[doc.category] || "üìÑ";
          catEl.textContent = cat ? `${emoji} ${cat.name}` : "";
        }

        if (descEl) {
          descEl.innerHTML = "";
          const p = document.createElement("p");
          p.textContent = doc.description || "–û–ø–∏—Å–∞–Ω–∏–µ —Å–∫–æ—Ä–æ –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–æ.";
          descEl.appendChild(p);
        }

        if (statusEl) statusEl.textContent = "";

        navigate("/doc");
      }

      const ROUTES = {
        "/": "home",
        "/create": "create",
        "/templates": "history",
        "/premium": "pricing",
        "/profile": "profile",
        "/doc": "doc-detail",
      };

      function showPage(pageId) {
        document.querySelectorAll(".page").forEach((page) => {
          page.classList.remove("active");
        });
        const page = document.getElementById(`page-${pageId}`);
        if (page) {
          page.classList.add("active");
        } else {
          const notFound = document.getElementById("page-not-found");
          if (notFound) notFound.classList.add("active");
        }
        setTimeout(() => {
          if (pageId === "create") {
            initCreatePage();
          } else if (pageId === "pricing") {
            initPricingPage();
          } else if (pageId === "history") {
            renderDocumentsPage();
            initHistoryPage();
          } else if (pageId === "doc-detail") {
            initDocDetailPage();
          }
        }, 0);
      }

      function updateNavigation(path) {
        document.querySelectorAll(".nav-item").forEach((item) => {
          const route = item.getAttribute("data-route");
          if (route === path) {
            item.classList.add("active");
          } else {
            item.classList.remove("active");
          }
        });
      }

      function navigate(path) {
        const pageId = ROUTES[path] || "not-found";
        showPage(pageId);
        updateNavigation(path);
      }

      function initRouter() {
        document.addEventListener("click", (e) => {
          const link = e.target.closest("a[data-route]");
          if (link) {
            e.preventDefault();
            navigate(link.getAttribute("data-route"));
          }
        });
        navigate("/");

        // –ø–æ—Å–ª–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä–∞ –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        initUserInfo();
      }

      function initUserInfo() {
        const user = tg.initDataUnsafe.user;

        if (!user) {
            console.error("–î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ –ø–æ–ª—É—á–µ–Ω—ã. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –±–æ—Ç–∞.");
            return;
        }

        // 1. –§–æ—Ä–º–∏—Ä—É–µ–º –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–µ –∏–º—è
        const firstName = user.first_name || "";
        const lastName = user.last_name || "";
        const username = user.username ? `@${user.username}` : "";
        
        // –ï—Å–ª–∏ –µ—Å—Ç—å –Ω–∏–∫–Ω–µ–π–º, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –µ–≥–æ —Ä—è–¥–æ–º —Å –∏–º–µ–Ω–µ–º
        const displayName = `${firstName} ${lastName} ${username}`.trim();

        // 2. –û–±–Ω–æ–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ
        const homeGreeting = document.getElementById("home-greeting");
        if (homeGreeting) {
            homeGreeting.textContent = `–ü—Ä–∏–≤–µ—Ç, ${firstName || '–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å'}! üëã`;
        }

        // 3. –û–±–Ω–æ–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –≤ –ü—Ä–æ—Ñ–∏–ª–µ
        const profileName = document.getElementById("profile-name");
        const profileId = document.getElementById("profile-id");

        if (profileName) profileName.textContent = displayName || "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å";
        if (profileId) profileId.textContent = `ID: ${user.id}`;

        // 4. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∞–≤–∞—Ç–∞—Ä–∫–∏ –ø–æ –ø–µ—Ä–≤–æ–π –±—É–∫–≤–µ (—Ç–∞–∫ –∫–∞–∫ —Ñ–æ—Ç–æ Telegram –Ω–µ –¥–∞–µ—Ç)
        const profileAvatarFallback = document.getElementById("profile-avatar-fallback");
        if (profileAvatarFallback) {
            const initial = firstName ? firstName.charAt(0).toUpperCase() : "?";
            profileAvatarFallback.textContent = initial;
            profileAvatarFallback.style.display = "flex";
            // –ü—Ä—è—á–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—É—é –∫–∞—Ä—Ç–∏–Ω–∫—É, –µ—Å–ª–∏ –æ–Ω–∞ –±—ã–ª–∞
            const profileImg = document.getElementById("profile-avatar");
            if (profileImg) profileImg.style.display = "none";
        }
    }

      function initDocDetailPage() {
        const backBtn = document.getElementById("doc-detail-back");
        const templateBtn = document.getElementById("doc-detail-template-btn");
        const documentBtn = document.getElementById("doc-detail-document-btn");
        const statusEl = document.getElementById("doc-detail-status");

        if (backBtn) {
          backBtn.onclick = () => {
            navigate("/templates");
          };
        }

        if (templateBtn) {
          templateBtn.onclick = () => {
            if (!currentDocument || !currentDocument.slug) return;
            sendToBot("send_template", currentDocument.slug);
            if (statusEl) {
              statusEl.textContent = "–®–∞–±–ª–æ–Ω –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –≤ Telegram.";
            }
          };
        }

        if (documentBtn) {
          documentBtn.onclick = () => {
            if (!currentDocument || !currentDocument.slug) return;
            sendToBot("send_document", currentDocument.slug);
            if (statusEl) {
              statusEl.textContent =
                "–î–æ–∫—É–º–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –≤ Telegram. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á–∞—Ç —Å –±–æ—Ç–æ–º.";
            }
          };
        }
      }
      let currentStep = 1;
      let showUpsell = false;
      function initCreatePage() {
        currentStep = 1;
        showUpsell = false;
        updateCreateStep();
        const nextBtn = document.getElementById("create-next");
        const prevBtn = document.getElementById("create-prev");
        const upsellCards = document.querySelectorAll(".upsell-card");
        const upsellClose = document.getElementById("upsell-close");
        if (nextBtn) {
          nextBtn.onclick = () => {
            currentStep = Math.min(currentStep + 1, 3);
            updateCreateStep();
          };
        }
        if (prevBtn) {
          prevBtn.onclick = () => {
            if (currentStep === 1) {
              navigate("/");
            } else {
              currentStep = Math.max(currentStep - 1, 1);
              updateCreateStep();
            }
          };
        }
        upsellCards.forEach((card) => {
          card.onclick = () => {
            showUpsell = true;
            updateUpsellModal();
          };
        });
        if (upsellClose) {
          upsellClose.onclick = () => {
            showUpsell = false;
            updateUpsellModal();
          };
        }
      }
      function updateCreateStep() {
        document.querySelectorAll(".create-step").forEach((step) => {
          step.style.display = "none";
        });
        const stepEl = document.getElementById(`create-step-${currentStep}`);
        if (stepEl) {
          stepEl.style.display = "block";
          stepEl.classList.add("fade-in");
        }
        const progress = currentStep * 33.33;
        const progressBar = document.getElementById("create-progress");
        if (progressBar) {
          progressBar.style.width = `${progress}%`;
        }
        const step1Label = document.getElementById("step-1-label");
        const step2Label = document.getElementById("step-2-label");
        const step3Label = document.getElementById("step-3-label");
        [step1Label, step2Label, step3Label].forEach((label, index) => {
          if (label) {
            if (index + 1 <= currentStep) {
              label.classList.add("text-primary");
            } else {
              label.classList.remove("text-primary");
            }
          }
        });
        const nextBtn = document.getElementById("create-next");
        const footerBtn = document.getElementById("create-footer-btn");
        if (currentStep < 3) {
          if (nextBtn) nextBtn.style.display = "none";
          if (footerBtn) {
            footerBtn.style.display = "block";
            footerBtn.innerHTML =
              '–î–∞–ª–µ–µ <svg class="ml-2" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="m9 18 6-6-6-6"/></svg>';
            footerBtn.onclick = () => {
              currentStep = Math.min(currentStep + 1, 3);
              updateCreateStep();
            };
          }
        } else {
          if (nextBtn) nextBtn.style.display = "none";
          if (footerBtn) {
            footerBtn.style.display = "block";
            footerBtn.textContent = "–í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é";
            footerBtn.onclick = () => router.navigate("/");
          }
        }
      }
      function updateUpsellModal() {
        const modal = document.getElementById("upsell-modal");
        if (modal) {
          if (showUpsell) {
            modal.style.display = "flex";
            modal.classList.add("slide-in");
          } else {
            modal.style.display = "none";
          }
        }
      }
      function initPricingPage() {
        const accordionItems = document.querySelectorAll(".accordion-item");
        accordionItems.forEach((item) => {
          const trigger = item.querySelector(".accordion-trigger");
          const content = item.querySelector(".accordion-content");
          if (trigger) {
            trigger.onclick = () => {
              const isOpen = item.classList.contains("open");
              if (isOpen) {
                item.classList.remove("open");
                if (content) content.style.display = "none";
              } else {
                accordionItems.forEach((i) => {
                  i.classList.remove("open");
                  const c = i.querySelector(".accordion-content");
                  if (c) c.style.display = "none";
                });
                item.classList.add("open");
                if (content) content.style.display = "block";
              }
            };
          }
        });
      }
      function initHistoryPage() {
        // –≤–∫–ª–∞–¥–∫–∏ –∏ –ø–æ–∏—Å–∫ –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã –î–æ–∫—É–º–µ–Ω—Ç—ã
        renderDocumentsTabs();
        setupDocumentsSearch();
      }
      initRouter();
      loadDocuments();
      setupSearch();
    </script>
  </body>
</html>
